"use strict";var app={},messages={blank:"— This field is required",short:"— Too short",unmatchedPassword:"— Doesn't match",incorrectPassword:"— Incorrect password",taken:"— Already taken",unknown:"— This doesn't exist"};function loadScreen(){loginApp.hidden=!0,registerApp.hidden=!0,loadApp.hidden=!1}var loginApp=new Vue({el:"#loginApp",data:{hidden:!1,usernameError:!1,passwordError:!1,usernameMessage:"",passwordMessage:""},methods:{register:function(){registerApp.hidden=!1,loadApp.hidden=!0,this.hidden=!0,this.usernameError=!1,this.passwordError=!1},validate:function(){var e=username.value,s=password.value;app.client||loadScreen(),e.length<4&&(this.usernameError=!0,this.passwordMessage=messages.short),e.length||(this.usernameError=!0,this.usernameMessage=messages.blank),s.length<6&&(this.passwordError=!0,this.passwordMessage=messages.short),s.length||(this.passwordError=!0,this.passwordMessage=messages.blank),4<=e.length&&6<=s.length&&e.length&&s.length&&app.client.validateLogin(e,s)}}}),registerApp=new Vue({el:"#registerApp",data:{hidden:!0,usernameError:!1,passwordError:!1,cpasswordError:!1,usernameMessage:"",passwordMessage:"",confirmMessage:""},methods:{login:function(){loginApp.hidden=!1,loadApp.hidden=!0,this.hidden=!0,this.usernameError=!1,this.passwordError=!1,this.cpasswordError=!1},validate:function(){var e=rusername.value,s=rpassword.value,r=cpassword.value;app.client||loadScreen(),this.usernameError=!1,this.passwordError=!1,this.cpasswordError=!1,e.length<4&&(this.usernameError=!0,this.usernameMessage=messages.short),e.length||(this.usernameError=!0,this.usernameMessage=messages.blank),s.length<6&&(this.passwordError=!0,this.passwordMessage=messages.short),s.length||(this.passwordError=!0,this.passwordMessage=messages.blank),r.length<6&&(this.cpasswordError=!0,this.confirmMessage=messages.short),r.length||(this.cpasswordError=!0,this.confirmMessage=messages.blank),s!==r&&(this.cpasswordError=!0,this.confirmMessage=messages.unmatchedPassword),4<=e.length&&6<=s.length&&6<=r.length&&e.length&&s.length&&r.length&&s===r&&app.client.validateRegister(e,s)}}});function connectClient(){app.client.socket.on("client:register:error",function(e){"duplicate"==e&&(registerApp.usernameError=!0,registerApp.usernameMessage=messages.taken)}),app.client.socket.on("client:register:success",function(e,s){registerApp.login(),app.client.register(e,s)}),app.client.socket.on("client:login:error",function(e){"unknown"==e?document.getElementById("username").value.length&&(loginApp.usernameError=!0,loginApp.usernameMessage=messages.unknown,loginApp.passwordError=!1):"incorrect"==e&&document.getElementById("password").value.length&&(loginApp.passwordError=!0,loginApp.passwordMessage=messages.incorrectPassword)}),app.client.socket.on("client:login:success",function(e){loadScreen(),app.client.login(e)}),app.client.socket.on("client:load",function(e){console.log(e)})}var loadApp=new Vue({el:"#loadScreen",data:{hidden:!0}});module.exports={pass:function(e,s){app[e]=s,"client"==e&&connectClient()}};