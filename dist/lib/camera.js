"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function lerp(e,t,i){return i*(t-e)+e}var Camera2D=function(){function i(e,t){_classCallCheck(this,i),t=t||{},this.movement={x:0,y:0},this.viewport={left:0,right:0,top:0,bottom:0,width:0,height:0,scale:[1,1]},this.distance=0,this.context=e||null,this.fieldOfView=t.fieldOfView||Math.PI/4,this.moveSpeed=t.moveSpeed||1,this.zoomSpeed=t.zoomSpeed||1,this.scaleSpeed=t.scaleSpeed||1}return _createClass(i,[{key:"setContext",value:function(e){this.context=e,this.updateViewport()}},{key:"setMoveSpeed",value:function(e){this.moveSpeed=e}},{key:"setZoomSpeed",value:function(e){this.zoomSpeed=e}},{key:"setScaleSpeed",value:function(e){this.scaleSpeed=e}},{key:"begin",value:function(e){"function"==typeof e&&(this.context.save(),this.applyScale(),this.applyTranslation(),e(this),this.context.restore())}},{key:"applyScale",value:function(){this.context.scale(this.viewport.scale[0],this.viewport.scale[1])}},{key:"applyTranslation",value:function(){this.context.translate(-this.viewport.left,-this.viewport.top)}},{key:"updateViewport",value:function(){this.aspectRatio=this.context.canvas.width/this.context.canvas.height,this.viewport.width=lerp(this.viewport.width,this.distance*Math.tan(this.fieldOfView),this.scaleSpeed),this.viewport.height=lerp(this.viewport.height,this.viewport.width/this.aspectRatio,this.scaleSpeed),this.viewport.left=this.movement.x-this.viewport.width/2,this.viewport.top=this.movement.y-this.viewport.height/2,this.viewport.right=this.viewport.left+this.viewport.width,this.viewport.bottom=this.viewport.top+this.viewport.height,this.viewport.scale[0]=this.context.canvas.width/this.viewport.width,this.viewport.scale[1]=this.context.canvas.height/this.viewport.height}},{key:"zoomTo",value:function(e){this.distance=lerp(this.distance,e,this.zoomSpeed),this.updateViewport()}},{key:"moveTo",value:function(e,t){this.movement.x=lerp(this.movement.x,e,this.moveSpeed),this.movement.y=lerp(this.movement.y,t,this.moveSpeed),this.updateViewport()}},{key:"screenToWorld",value:function(e,t,i){return i=i||{x:e/this.viewport.scale[0]+this.viewport.left,y:t/this.viewport.scale[1]+this.viewport.top}}},{key:"worldToScreen",value:function(e,t,i){return i=i||{x:(e-this.viewport.left)*this.viewport.scale[0],y:(t-this.viewport.top)*this.viewport.scale[1]}}}]),i}();module.exports={create:function(e,t){return new Camera2D(e,t)}};